#!/usr/bin/env zsh

# Extend min config
# -------------------------------------------------------------------------------------------------

source "${HOME}/.zshrc.min"

# Configure tools
# -------------------------------------------------------------------------------------------------

# GPG and SSH keychain config
export GPG_TTY="$(tty)"
export SSH_AUTH_SOCK="/run/user/$UID/gnupg/S.gpg-agent.ssh"
gpg-connect-agent updatestartuptty /bye > /dev/null

# Python pipx
autoload -U bashcompinit
bashcompinit

eval "$(register-python-argcomplete pipx)"

# Load plugins
# -------------------------------------------------------------------------------------------------

# Loading snippets
zinit snippet "OMZ::plugins/keychain/keychain.plugin.zsh"

# # Improving ZSH usage
zinit light "changyuheng/fz"
zinit light "tcnksm/docker-alias"
zinit light "bonnefoa/kubectl-fzf"
zinit light "lukechilds/zsh-nvm"

# Post-plugin hook
# -------------------------------------------------------------------------------------------------

# Autoload tmux
if [ -z "$TMUX" ] && [[ $current_emulator == *"alacritty"* ]]; then
  tmuxinator start default
fi
